<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vignette • tiefightR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Vignette">
<meta property="og:description" content="tiefightR">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tiefightR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Examples.html">Examples</a>
    </li>
    <li>
      <a href="../articles/tiefightR_Vignette.html">Vignette</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mytalbot/tiefightR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Vignette</h1>
                        <h4 class="author">Steven R. Talbot</h4>
            
            <h4 class="date">2020-06-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mytalbot/tiefightR/blob/master/vignettes/tiefightR_Vignette.Rmd"><code>vignettes/tiefightR_Vignette.Rmd</code></a></small>
      <div class="hidden name"><code>tiefightR_Vignette.Rmd</code></div>

    </div>

    
    
<div id="tiefighr-for-preference-testing" class="section level2">
<h2 class="hasAnchor">
<a href="#tiefighr-for-preference-testing" class="anchor"></a>tiefighR for preference testing</h2>
<p>Preference tests are a valuable tool to measure the “wants” of individuals and have been proven to be a valid method in order to rate different commodities. The number of commodities presented at the same time is, however, limited and in classical test settings usually only two options are presented. In our paper we evaluate the option of combining multiple binary choices in order to rank preferences among a larger number of commodities. The tiefightR package offers the neccessary tools to test selections of commodities and to obtain an estimate of their relative position.</p>
</div>
<div id="general-concept" class="section level2">
<h2 class="hasAnchor">
<a href="#general-concept" class="anchor"></a>General concept</h2>
<p>For data binarization a preference threshold for ties is needed (by default this is 50% for an equal commodity selection Likelihood). In case of ties, the binary response variable is randomized. Therefore, the analysis has to be repeated multiple times for getting more robust estimates of the tested commodities’ position in the data.</p>
<p>Further, the tiefighteR package offers simulation capabilities. This will help to determine the position of individual items without having to test the whole data set. The simulation will randomly test an item against all remaining combinations. These calculations are combined with an estimate on the intransitivity which acts as a quality sign for the found position. The simulation results can give an indication for similar data and how new commodities can be positioned.</p>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>We conducted experiments with rhesus macaques, mice, and humans in order to validate the ranking method across species. These data sets are included in the package and are called <code>human</code>, <code>mouse</code> and <code>rhesus</code>. The response variable for human is binary and for rhesus and mouse it is continous (i.e., the amount of drank liquid). In order to harmonize the analysis, the continous data will have to be binarized.</p>
<p>The following example (mouse) shows how the raw (input) data need to be structured. The “pref_img1” is the binary response variable.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw pkg">tiefightR</span><span class="kw ns">::</span><span class="no"><a href="../reference/mouse.html">mouse</a></span>)
<span class="co">#&gt;         date animalID  side fluidType numOF_visits_with_Licks</span>
<span class="co">#&gt; 1 09.07.2018  ro_ge_4  left       HCl                       7</span>
<span class="co">#&gt; 2 09.07.2018  ro_ge_4 right      NaCl                      17</span>
<span class="co">#&gt; 3 10.07.2018  ro_ge_4  left      NaCl                       1</span>
<span class="co">#&gt; 4 10.07.2018  ro_ge_4 right       HCl                      22</span>
<span class="co">#&gt; 5 09.07.2018  ro_si_4  left       HCl                      13</span>
<span class="co">#&gt; 6 09.07.2018  ro_si_4 right      NaCl                      21</span>
<span class="co">#&gt;   total_visits_withLicks combinationWith test_no no_licks total_licks</span>
<span class="co">#&gt; 1                     21            NaCl       1      543        1740</span>
<span class="co">#&gt; 2                     21             HCl       1     1197        1740</span>
<span class="co">#&gt; 3                     23             HCl       1        1        1528</span>
<span class="co">#&gt; 4                     23            NaCl       1     1527        1528</span>
<span class="co">#&gt; 5                     34            NaCl       1      722        2097</span>
<span class="co">#&gt; 6                     34             HCl       1     1375        2097</span></pre></body></html></div>
<p>The column names in different data sets can be different. Therefore, the functions have fields that need specification. The following names should be adjusted when they are different (e.g. in the <code>tie_worth</code> function).</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"> <span class="no">SV</span>        <span class="kw">=</span> <span class="st">"side"</span>                     <span class="co"># name of the side variable (default = "side_img1")</span>
 <span class="no">RF</span>        <span class="kw">=</span> <span class="st">"fluidType"</span>                <span class="co"># name of the reference fluid variable (default = "img1")</span>
 <span class="no">CF</span>        <span class="kw">=</span> <span class="st">"combinationWith"</span>          <span class="co"># name of the combination fluid variable (default = "img2")</span>
 <span class="no">id</span>        <span class="kw">=</span> <span class="st">"animalID"</span>                 <span class="co"># subject IDs (default = "ID")</span>
 <span class="no">RV</span>        <span class="kw">=</span> <span class="st">"numOF_visits_with_Licks"</span>  <span class="co"># name of the response variable (default = "pref_img1")</span></pre></body></html></div>
</div>
<div id="how-many-tests-are-required" class="section level2">
<h2 class="hasAnchor">
<a href="#how-many-tests-are-required" class="anchor"></a>How many tests are required?</h2>
<p>The output of the <code>tie_worth</code> function are worth values that can be ranked for position. When ties are present (or introduced), the worth values will shift. The question is: when can a user be certain that a position is legit when ties are present? In order to stabilise the position in terms of worth values, we use the power of the central tendency shift of the mean. The more often a random test is repeated, the more stable the mean becomes. In order to generalize the different distances we calculate the (Euclidean) distance matrix of the worth values at each randomization step and report the average distance over the number of randomizations. It can be expected that the mean Euclidean distance and the corresponding variance stabilize.</p>
<p>Consider the following worth plot for binary mouse data. The distance between two data points is simply the difference between worth values. In the distance matrix the distances for all combinations are calculated.</p>
<div class="figure">
<img src="tiefightR_Vignette_files/figure-html/unnamed-chunk-4-1.png" alt="Concept of the Euclidean distance measurement between worth values." width="60%"><p class="caption">
Concept of the Euclidean distance measurement between worth values.
</p>
</div>
<p>Of course, this only works when ties are present! Otherwise, there would be nothing to randomize.</p>
<p><img src="tiefightR_Vignette_files/figure-html/unnamed-chunk-5-1.png" width="45%"><img src="tiefightR_Vignette_files/figure-html/unnamed-chunk-5-2.png" width="45%"></p>
<p>The plots show that the overall change in Euclidean distances is small. The largest step occurs within the first 50 to 75 randomization steps. The corresponding SD of the distances corroborates this. Empirically, for these mouse data, at least 50 randomizations are required to obtain stable mean positions with the tested commodities.</p>
</div>
<div id="testing-single-commodities" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-single-commodities" class="anchor"></a>Testing single commodities</h2>
<p>With this knowledge, individual items from the commodity list can be tested. The tie_test function was specifically designed to test individual combinations. For example, if the position of the NaCl item is to be tested (e.g., at 50 randomizations), the user combines this with any other item combination from the list. As a further criterion (and sign of good quality), the intransitivity is computed as well. The user can add more items to the tested “against” list for getting more confidence in the positioning of the tested item (hopefully, with lower intransitivity).</p>
<pre><code>#&gt;      against worth pos intrans I_sd  upr   lwr
#&gt; NaCl     HCl  0.19   2   35.33 2.08 40.5 30.16</code></pre>
<p>NaCl is positioned on position 2 (which is the truth, with HCl in position 1). Adding more items can lower the intransitivity (but depends on the individual intransitivities in the data set).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steven Talbot, Dana Pfefferle, Lewejojann Lars.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
